# ZenFocus - Windows用ポモドーロアプリ開発計画

## 1. プロジェクト概要
Rustで構築された、集中力を高めるためのWindows用デスクトップポモドーロアプリケーション。
主な特徴として、視覚的な「サウナ時計」タイマー、ミニウィンドウモード、カレンダーによる履歴管理機能を備えます。

## 2. 技術スタック
*   **コア言語**: Rust
*   **アプリケーションフレームワーク**: [Tauri](https://tauri.app/)
    *   *選定理由*: Rustのパフォーマンスとシステム機能に加え、Web技術（Reactなど）を使って複雑なUI（カレンダー、アニメーション）を柔軟に構築できるため。Windowsのウィンドウ管理（ミニモード）やアプリサイズの軽量化にも優れています。
*   **フロントエンド**: React (TypeScript) + Tailwind CSS
    *   *選定理由*: UIの迅速な開発、ダークモードやカレンダー等の複雑なコンポーネントの実装が容易であるため。
*   **状態管理**: Rust (バックエンド) を信頼できる情報源とし、React (フロントエンド) で表示を行う構成。
*   **データ保存**: SQLite ( `sqlx` や `rusqlite` 経由) またはシンプルなJSONファイルによる永続化。

## 3. 主な機能

### 3.1. タイマー機能
*   **操作**:
    *   **開始 (Start)**: カウントダウンを開始します。
    *   **停止 (Stop/Pause)**: タイマーを一時停止します。
    *   **終了 (Finish/Complete)**: セッションを手動で完了させます（時間を記録します）。
    *   **リセット (Reset)**: タイマーを初期値に戻します。**時間は記録されません**。
*   **完了時**:
    *   設定可能な通知音を再生します。
    *   集中した時間をその日の合計に自動的に加算します。

### 3.2. ビジュアルインターフェース
*   **「サウナ時計」デザイン**:
    *   12分計や60分計のアナログ時計のように、時間が経過するにつれて円形のバーが満ちる/減るデザイン。
    *   残り時間を視覚的に分かりやすく表示します。
*   **ダークモード**:
    *   目に優しいダークカラーパレットを採用し、OSの設定または手動切り替えに対応します。
*   **ミニウィンドウモード**:
    *   ボタン一つでアプリを縮小し、円形タイマーと必須コントロールのみを表示する「最前面固定（Always-on-top）」のオーバーレイモードに切り替えます。

### 3.3. 統計・履歴
*   **日次集計**: 1日ごとの合計集中時間を記録します。
*   **カレンダー表示**:
    *   集中した日や合計時間をカレンダー上で視覚化します。
    *   日付をクリックすると、その日の詳細を表示します。

## 4. アーキテクチャ

### バックエンド (Rust)
*   **コマンドハンドラ**: フロントエンドから呼び出される関数群（例: `start_timer`, `save_session`）。
*   **ウィンドウマネージャ**: 「ミニウィンドウ」モードへの切り替え（リサイズ、スタイル変更）を制御します。
*   **データベースサービス**: 日々の集中ログの読み書きを管理します。
*   **オーディオシステム**: 完了時のサウンド再生を処理します。

### フロントエンド (React/TS)
*   **タイマーコンポーネント**: SVG/Canvasを使用した円形タイマー描画。
*   **カレンダーコンポーネント**: 月表示のグリッドビュー。
*   **テーママネージャ**: Tailwindのダークモードクラスの切り替えを管理します。

## 5. 開発フェーズ

### フェーズ 1: セットアップと基本UI
*   React/TSを含むTauriプロジェクトの初期化。
*   基本的なタイマーUI（テキストベース）と開始/停止/リセットボタンの実装。
*   Tailwind CSSの導入と基本ダークモード設定。

### フェーズ 2: コアロジックと「サウナ時計」
*   Rust側でのタイマーロジック（または精度の高いフロントエンド実装）の構築。
*   円形の「サウナ時計」ビジュアルコンポーネントの開発。
*   開始/停止/リセットの操作をバックエンドと連携（必要に応じて）またはローカル管理。

### フェーズ 3: ウィンドウ管理とサウンド
*   「ミニウィンドウ」切り替え機能の実装（ウィンドウのリサイズ、最前面固定）。
*   タイマー完了時のサウンド再生機能の統合。

### フェーズ 4: データ永続化とカレンダー
*   保存メカニズム（JSON/SQLite）のセットアップ。
*   タイマー終了時の「セッション保存」ロジックの実装。
*   蓄積されたデータを表示するカレンダービューの構築。

### フェーズ 5: 仕上げとパッケージング
*   UIアニメーションの洗練。
*   Windows上での動作テスト（スケーリング、スナップ機能など）。
*   最終インストーラ（.msi/.exe）のビルド。